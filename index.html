<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>–î–æ–ø –ò–Ω—Ñ–∞ ‚Äî –°–ø–∏—á–∏ –∏ –ê—É–¥–∏–æ</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    :root { --accent:#6c5ce7; }
    *{box-sizing:border-box}
    body{font-family:system-ui, Arial; margin:16px; background:#0f1226; color:#e9e9f5}
    h2{margin:0 0 12px}
    .tabs{display:flex; gap:8px; margin-bottom:12px}
    .tab{padding:10px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.15); background:rgba(255,255,255,.06); cursor:pointer; user-select:none}
    .tab.active{background:var(--accent); border-color:var(--accent); color:#fff}
    .grid{display:grid; grid-template-columns:1fr; gap:12px}
    @media(min-width:760px){.grid{grid-template-columns:1fr 1fr}}
    .card{border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.05); border-radius:14px; padding:12px}
    .title{font-weight:600; margin-bottom:8px}
    .btn{display:inline-block; padding:9px 12px; border-radius:10px; border:0; background:var(--accent); color:#fff; text-decoration:none}
    .note{font-size:13px; color:#bfc3ff}
    .muted{color:#9aa0ff;font-size:13px}
    audio{width:100%; margin-top:6px}
  </style>
</head>
<body>
  <h2>üß© –î–æ–ø –ò–Ω—Ñ–∞</h2>
  <div class="tabs">
    <div id="tab-speech" class="tab active">–°–ø–∏—á–∏</div>
    <div id="tab-audio"  class="tab">–ê—É–¥–∏–æ</div>
  </div>

  <div id="wrap-speech" class="grid"></div>
  <div id="wrap-audio"  class="grid" style="display:none"></div>

<script>
  // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –æ–∫–Ω–æ WebApp
  const tg = window.Telegram.WebApp; tg.expand();

  // –ë–∞–∑–æ–≤—ã–π –ø—Ä–µ—Ñ–∏–∫—Å CDN –¥–ª—è —Ç–≤–æ–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (jsDelivr)
  const BASE = "https://cdn.jsdelivr.net/gh/igorogolenko815-ui/blog-web@main";

  // === –§–ê–ô–õ–´ (–¥–æ–±–∞–≤–ª—è–π —Å—é–¥–∞ –Ω–æ–≤—ã–µ –∏–º–µ–Ω–∞ –ø–æ –º–µ—Ä–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ /speeches –∏ /audio) ===
  const SPEECH_FILES = ["mgts.pdf", "poliklinika.docx"];
  const AUDIO_FILES  = ["rostelecom-1.mp3", "mgts-domofon.m4a"];
  // ==============================================================================

  // –ü–æ–º–æ—â–Ω–∏–∫–∏
  function speechCard(name){
    const url = `${BASE}/speeches/${encodeURIComponent(name)}`;
    const div = document.createElement('div'); div.className='card';
    div.innerHTML = `
      <div class="title">üìÑ ${name}</div>
      <a class="btn" href="${url}" target="_blank">–û—Ç–∫—Ä—ã—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç</a>
      <div class="muted">–§–∞–π–ª –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è /speeches/</div>
    `;
    return div;
  }

  function audioType(name){
    const n = name.toLowerCase();
    if(n.endsWith(".mp3")) return "audio/mpeg";
    if(n.endsWith(".m4a")) return "audio/mp4";
    if(n.endsWith(".wav")) return "audio/wav";
    if(n.endsWith(".ogg")) return "audio/ogg";
    return "audio/mpeg";
  }

  function audioCard(name){
    const url = `${BASE}/audio/${encodeURIComponent(name)}`;
    const type = audioType(name);
    const div = document.createElement('div'); div.className='card';
    div.innerHTML = `
      <div class="title">üéß ${name}</div>
      <audio controls preload="none" crossorigin="anonymous">
        <source src="${url}" type="${type}"/>
        –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ.
      </audio>
      <div class="note">–ï—Å–ª–∏ –≤–¥—Ä—É–≥ –Ω–µ –∏–≥—Ä–∞–µ—Ç, –æ—Ç–∫—Ä–æ–π —á–µ—Ä–µ–∑ —Å—Å—ã–ª–∫—É –Ω–∏–∂–µ.</div>
      <p><a class="btn" href="${url}" target="_blank">–û—Ç–∫—Ä—ã—Ç—å –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ</a></p>
      <div class="muted">–§–∞–π–ª –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è /audio/</div>
    `;
    return div;
  }

  function render(){
    const ws = document.getElementById('wrap-speech');
    const wa = document.getElementById('wrap-audio');
    ws.innerHTML = ''; wa.innerHTML = '';

    if(!SPEECH_FILES.length){
      ws.innerHTML = '<div class="card">–ù–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –î–æ–±–∞–≤—å —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫—É <b>/speeches</b> –∏ —É–∫–∞–∂–∏ –∏—Ö –∏–º–µ–Ω–∞ –≤ –º–∞—Å—Å–∏–≤–µ <code>SPEECH_FILES</code>.</div>';
    } else {
      SPEECH_FILES.forEach(n => ws.appendChild(speechCard(n)));
    }

    if(!AUDIO_FILES.length){
      wa.innerHTML = '<div class="card">–ù–µ—Ç –∞—É–¥–∏–æ. –î–æ–±–∞–≤—å —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫—É <b>/audio</b> –∏ —É–∫–∞–∂–∏ –∏—Ö –∏–º–µ–Ω–∞ –≤ –º–∞—Å—Å–∏–≤–µ <code>AUDIO_FILES</code>.</div>';
    } else {
      AUDIO_FILES.forEach(n => wa.appendChild(audioCard(n)));
    }
  }

  function tabs(){
    const ts = document.getElementById('tab-speech');
    const ta = document.getElementById('tab-audio');
    const ws = document.getElementById('wrap-speech');
    const wa = document.getElementById('wrap-audio');

    ts.onclick = ()=>{ ts.classList.add('active'); ta.classList.remove('active'); ws.style.display='grid'; wa.style.display='none'; }
    ta.onclick = ()=>{ ta.classList.add('active'); ts.classList.remove('active'); wa.style.display='grid'; ws.style.display='none'; }
  }

  render(); tabs();
</script>
</body>
</html>
